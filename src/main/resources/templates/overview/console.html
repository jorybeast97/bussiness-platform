<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>企业人事管理平台</title>
    <link rel="stylesheet" th:href="@{../../static/js/layui/css/layui.css}">
    <link rel="stylesheet" th:href="@{../../static/js/font-awesome-4.7.0/css/font-awesome.css}">
</head>
<body style="background-color: whitesmoke">
<div style="padding: 20px; background-color: #F2F2F2;">
    <div class="layui-row layui-col-space15">
        <!-- 快速入口 -->
        <div class="layui-col-md4">
            <div class="layui-card">
                <div class="layui-card-body">
                    <div class="layui-carousel" id="test1" lay-filter="test1">
                        <div carousel-item="">
                            <div><img src="../../static/image/974e824ff5ac153e81c4f49b5c7b4f3a.jpg" style="width: 100%;height: 100%"></div>
                            <div><img src="../../static/image/Desert%20Storm.jpg" style="width: 100%;height: 100%"></div>
                            <div><img src="../../static/image/El%20Capitan.jpg" style="width: 100%;height: 100%"></div>
                            <div><img src="../../static/image/High%20Sierra.jpg" style="width: 100%;height: 100%"></div>
                            <div><img src="../../static/image/Mojave%20Day.jpg" style="width: 100%;height: 100%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- 进度条相关 -->
        <div class="layui-col-md4">
            <div class="layui-card">
                <div class="layui-card-header">
                    <i class="fa fa-bar-chart"> 系统监控</i>
                </div>
                <div class="layui-card-body">
                    <div style="margin-top: 3px">
                        <i class="layui-icon layui-icon-engine" style="font-size: 100%;color: gray"> CPU占用率</i>
                        <div class="layui-progress" style="margin-top: 5px">
                            <div class="layui-progress-bar layui-bg-orange" th:lay-percent="${cpu_info}"></div>
                        </div>
                    </div>
                    <div style="margin-top: 5px">
                        <i class="layui-icon layui-icon-console" style="font-size: 100%;color: gray"> 内存占用率</i>
                        <div class="layui-progress" style="margin-top: 5px">
                            <div class="layui-progress-bar layui-bg-green" th:lay-percent="${memory_info}"></div>
                        </div>
                    </div>
                    <div style="margin-top: 5px">
                        <i class="layui-icon layui-icon-tabs" style="font-size: 100%;color: gray"> 日志情况</i>
                        <div class="layui-progress" style="margin-top: 5px">
                            <div class="layui-progress-bar layui-bg-blue" lay-percent="43%"></div>
                        </div>
                    </div>
                    <div style="margin-top: 5px">
                        <i class="layui-icon layui-icon-about" style="font-size: 100%;color: gray"> 异常情况</i>
                        <div class="layui-progress" style="margin-top: 5px">
                            <div class="layui-progress-bar layui-bg-red" lay-percent="6%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--  系统信息    -->
        <div class="layui-col-md4">
            <div class="layui-card">
                <div class="layui-card-header">
                    <i class="fa fa-unlink"> 系统信息</i>
                </div>
                <div class="layui-card-body">
                    <table class="layui-table">
                        <colgroup>
                            <col width="100">
                            <col width="80">
                        </colgroup>
                        <tbody>
                        <tr>
                            <td>系统版本</td>
                            <td>0.0.1-SNAPSHOT</td>
                        </tr>
                        <tr>
                            <td>服务器环境</td>
                            <td th:text="${ip_address}"></td>
                        </tr>
                        <tr>
                            <td>运行环境</td>
                            <td th:text="${jdk_version}"></td>
                        </tr>
                        <tr>
                            <td>电子邮箱</td>
                            <td>jorybeast97@foxmail.com</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <!-- 图表展示 -->
    <div class="layui-row layui-col-space15">
        <div class="layui-col-md8">
            <div class="layui-card">
                <div class="layui-card-header">
                    <i class="fa fa-id-card-o"> 企业员工统计</i>
                </div>
                <div class="layui-card-body">
                    <div id="department_number" style="width: 800px;height: 300px">
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-col-md4" >
            <div class="layui-card">
                <div class="layui-card-header">
                    <i class="fa fa-pie-chart"> 任务统计图</i>
                </div>
                <div class="layui-card-body">
                    <div id="task_statistics" style="width: 380px; height: 300px"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="layui-row layui-col-space15">
        <div class="layui-col-md12">
            <div class="layui-card">
                <div class="layui-card-header">
                    <i class="fa fa-line-chart"> 薪资同比图</i></div>
                <div class="layui-card-body">
                    <div id="user_add" style="width: 100%;height: 300px"></div>
                </div>
            </div>
        </div>

    </div>
</div>

<!--引入echarts-->
<script th:src="@{../../static/js/echart/echarts.min.js}"></script>
<script th:src="@{../../static/js/layui/layui.js}"></script>
<script>
    //JavaScript代码区域
    layui.use(['element','layer'], function(){
        var element = layui.element;
        var $ = layui.jquery;

        $.get("/console/getPersonNumInfo",function (result){
            echarts.init(document.getElementById('department_number')).setOption({
                title: {
                    text: ''
                },
                tooltip: {},
                legend: {
                    data:['总人数','男性','女性']
                },
                xAxis: {
                    data: result.departmentName
                },
                yAxis: {},
                series: [
                    {
                        name: '总人数',
                        type: 'bar',
                        data: result.all
                    },
                    {
                        name: '男性',
                        type: 'bar',
                        data: result.man
                    },
                    {
                        name: '女性',
                        type: 'bar',
                        data: result.woman
                    }
                ]
            });
        })

        $.get("/console/getSummaryGraphInfo",function (result) {
            echarts.init(document.getElementById("task_statistics")).setOption({
                series : [
                    {
                        name: '任务统计',
                        type: 'pie',
                        radius: '60%',
                        roseType: 'angle',
                        data: result
                    }
                ]
            })
        })

        $.get("/console/getSalaryInformation",function (result) {
            var colors = ['#5793f3', '#d14a61', '#675bba'];
            echarts.init(document.getElementById("user_add")).setOption({
                color: colors,
                tooltip: {
                    trigger: 'none',
                    axisPointer: {
                        type: 'cross'
                    }
                },
                legend: {
                    data:[result.title[1],result.title[0]]
                },
                grid: {
                    top: 70,
                    bottom: 50
                },
                xAxis: [
                    {
                        type: 'category',
                        axisTick: {
                            alignWithLabel: true
                        },
                        axisLine: {
                            onZero: false,
                            lineStyle: {
                                color: colors[1]
                            }
                        },
                        axisPointer: {
                            label: {
                                formatter: function (params) {
                                    return '薪资发放情况  ' + params.value
                                        + (params.seriesData.length ? '：' + params.seriesData[0].data : '');
                                }
                            }
                        },
                        data: result.preIndex
                    },
                    {
                        type: 'category',
                        axisTick: {
                            alignWithLabel: true
                        },
                        axisLine: {
                            onZero: false,
                            lineStyle: {
                                color: colors[0]
                            }
                        },
                        axisPointer: {
                            label: {
                                formatter: function (params) {
                                    return '薪资发放情况  ' + params.value
                                        + (params.seriesData.length ? '：' + params.seriesData[0].data : '');
                                }
                            }
                        },
                        data: result.currIndex
                    }
                ],
                yAxis: [
                    {
                        type: 'value'
                    }
                ],
                series: [
                    {
                        name: result.title[1],
                        type: 'line',
                        xAxisIndex: 1,
                        smooth: true,
                        data: result.currSalary
                    },
                    {
                        name: result.title[0],
                        type: 'line',
                        xAxisIndex: 0,
                        smooth: true,
                        data: result.preSalary
                    }

                ]
            })
        })
    });


    //轮播图
    layui.use(['carousel', 'form'], function() {
        var carousel = layui.carousel
            , form = layui.form;
        //常规轮播
        carousel.render({
            elem: '#test1'
            , width: '100%'
            , height: '203px'
            , arrow: 'hover'
            , indicator: 'inside'
        });
    })

</script>
</body>
</html>
