<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>企业人事管理平台</title>
    <link rel="stylesheet" th:href="@{../static/js/layui/css/layui.css}">
    <link rel="stylesheet" th:href="@{../static/js/font-awesome-4.7.0/css/font-awesome.css}">
    <link rel="shortcut icon" th:href="@{../static/image/favicon.png}">
</head>
<body class="layui-layout-body">
<div class="layui-layout layui-layout-admin">
    <div class="layui-header">
        <div class="layui-logo">
            企业人事管理平台
        </div>
        <ul class="layui-nav layui-layout-right">
            <li class="layui-nav-item">
                <span class="layui-badge-dot"></span>
                <a href="javascript:;">个人考勤</a>
                <dl class="layui-nav-child">
                    <dd><a href="javascript:;" onclick="signIn()">到岗签到</a></dd>
                    <dd><a href="javascript:;" onclick="signOut()">离岗签退</a></dd>
                    <dd><a href="/attendance/personalAttendance" target="content_iframe">个人考勤</a></dd>
                    <dd th:remove="${role}"><a href="/attendance/departmentAttendance" target="content_iframe">部门考勤</a></dd>
                </dl>
            </li>
            <li class="layui-nav-item">
                <a href="javascript:;">其它系统</a>
                <dl class="layui-nav-child">
                    <dd><a href="">邮件管理</a></dd>
                    <dd><a href="">消息管理</a></dd>
                </dl>
            </li>
            <li class="layui-nav-item">
                <a href="javascript:;">个人信息</a>
                <dl class="layui-nav-child">
                    <dd><a href="/employee/editpersonalinfo" target="content_iframe">修改信息</a></dd>
                </dl>
            </li>
            <li class="layui-nav-item">
                <a href="javascript:;">
                    <img th:src="@{../static/image/user_image.png}" class="layui-nav-img">[[${name}]]
                </a>
                <dl class="layui-nav-child">
                    <dd><a href="javascript:;" onclick="logout()">退出登录</a> </dd>
                </dl>
            </li>
        </ul>
    </div>

    <div class="layui-side layui-bg-black">
        <div class="layui-side-scroll">
            <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
            <ul class="layui-nav layui-nav-tree"  lay-filter="test">
                <li class="layui-nav-item layui-nav-itemed">
                    <a href="/console/" target="content_iframe">
                        <i class="fa fa-home"> 系统首页</i>
                    </a>
                </li>
                <li class="layui-nav-item layui-nav-itemed">
                    <a href="JavaScript:">
                        <i class="fa fa-user-circle"> 企业信息</i>
                    </a>
                    <dl class="layui-nav-child">
                        <dd><a href="/employee/" target="content_iframe"> 员工信息</a></dd>
                        <dd><a href="/department/" target="content_iframe"> 部门信息</a></dd>
                    </dl>
                </li>
                <li class="layui-nav-item layui-nav-itemed">
                    <a href="JavaScript:">
                        <i class="fa fa-user-circle"> 薪资信息</i>
                    </a>
                    <dl class="layui-nav-child">
                        <dd th:remove="${role}"><a href="/salary/" target="content_iframe"> 薪资列表</a></dd>
                        <dd><a href="/salary/personalsalary" target="content_iframe"> 个人薪资</a></dd>
                    </dl>
                </li>
                <li class="layui-nav-item layui-nav-itemed">
                    <a href="JavaScript:">
                        <i class="fa fa-tasks"> 任务流程</i>
                    </a>
                    <dl class="layui-nav-child">
                        <dd th:remove="${role}"><a href="/task/" target="content_iframe"> 任务列表</a></dd>
                        <dd><a href="/task/personaltask" target="content_iframe"> 个人任务</a></dd>
                    </dl>
                </li>
                <li class="layui-nav-item layui-nav-itemed">
                    <a href="JavaScript:">
                        <i class="fa fa-tasks"> 休假系统</i>
                    </a>
                    <dl class="layui-nav-child">
                        <dd th:remove="${role}"><a href="/vacation/" target="content_iframe"> 休假审核</a></dd>
                        <dd><a href="/vacation/personalVacation" target="content_iframe"> 休假申请</a></dd>
                    </dl>
                </li>
                <li class="layui-nav-item layui-nav-itemed">
                    <a href="JavaScript:">
                        <i class="fa fa-file-code-o"> 日志信息</i>
                    </a>
                    <dl class="layui-nav-child">
                        <dd><a href="/operationlog/" target="content_iframe"> 操作日志</a></dd>
                        <dd><a href="/exceptionlog/" target="content_iframe"> 异常日志</a></dd>
                    </dl>
                </li>
            </ul>
        </div>
    </div>

    <div class="layui-body" style="background-color: whitesmoke">
        <iframe name="content_iframe" frameborder="no" border="0" class="larry-iframe"
                style="width: 100%;height: 100%" src="/console">
        </iframe>
    </div>
    <div class="layui-footer" style="text-align: center">
        <!-- 底部固定区域 -->
        2020 - 2021 © 企业人事管理平台(BUSSINESS-PLATFORM) - power by 范昊
    </div>
</div>
<!--引入echarts-->
<script th:src="@{../static/js/echart/echarts.min.js}"></script>
<script th:src="@{../static/js/layui/layui.all.js}"></script>
<script>
    var layer = layui.layer;

    function modifyPersonInfo(){
        layer.open({
            type: 2//0（信息框，默认）1（页面层）2（iframe层）3（加载层）4（tips层)
            ,offset: 'auto'
            ,title: "修改个人信息" //不显示标题栏
            ,area: ['90%','90%']//定义宽高
            ,shade: 0.8//遮幕
            ,id: 'LAY_layuipro'//设定一个id，防止重复弹出
            ,btn: '关闭窗口'
            ,btnAlign: 'c'//按钮排列：居中对齐
            ,moveType: 1 //拖拽模式，0或者1
            ,content: '/employee/editpersonalinfo'
            ,yes : function () {
                layer.closeAll();
            }
        });
    }

    var $ = layui.jquery;
    function logout() {
        $.get("/logout",function (response) {
            window.location.href = "/login";
            layer.msg("退出登录成功")
        })
    }

    function signIn() {
        $.get("/attendance/signIn",function (response) {
            layer.msg(response.message)
        })
    }

    function signOut() {
        $.get("/attendance/signOut",function (response) {
            layer.msg(response.message)
        })
    }



</script>
</body>
</html>
